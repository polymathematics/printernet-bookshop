<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Books - Book Swap</title>
    <link rel="icon" type="image/png" href="images/readerLogo.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Your Shelf</h1>
            <div class="header-actions">
                
                <a href="index.html" class="btn-secondary">Back to Stacks</a>
                <button id="logoutBtn" class="btn-secondary">Logout</button>
            </div>
        </header>

        <main>
            <div id="myBooksContainer" style="display: none;">
                <div class="user-info">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div>
                            <h2 id="currentUserName"></h2>
                            <p class="book-count">Current books on your shelf: <span id="bookCount">0</span>/5</p>
                        </div>
                        <button id="settingsBtn" class="btn-secondary" style="margin-top: 0;">Settings</button>
                    </div>
                </div>

                <!-- Tabs Navigation -->
                <div class="tabs-container">
                    <button class="tab-btn active" data-tab="books">My Books</button>
                    <button class="tab-btn" data-tab="sent">Sent Offers</button>
                    <button class="tab-btn" data-tab="received">Received Offers</button>
                    <button class="tab-btn" data-tab="accepted">Trades Accepted</button>
                </div>

                <!-- Tab Content: My Books -->
                <div id="tab-books" class="tab-content active">
                    <div id="addBookSection" class="add-book-section" style="display: none;">
                        <h3>Add a Book</h3>
                        <p>Tip: take a well lit top down photo of your book on a flat surface - Let's keep the bookshop looking good!</p>
                        <br>
                        <form id="addBookForm">
                            <input type="text" id="bookTitle" placeholder="Book Title" required>
                            <input type="text" id="bookAuthor" placeholder="Author" required>
                            <textarea id="bookDescription" placeholder="Description (optional)"></textarea>
                            <div class="condition-field">
                                <label for="bookCondition">Condition</label>
                                <select id="bookCondition" name="bookCondition" required>
                                    <option value="new">Great</option>
                                    <option value="used" selected>Fine</option>
                                    <option value="bad intact">Bad but intact</option>
                                    <option value="bad damaged">Bad and barely hanging on</option>
                                </select>
                            </div>
                            <label for="bookImage">Cover Image (optional)</label>
                            <input type="file" id="bookImage" accept="image/*">
                            <div style="display: flex; gap: 8px;">
                                <button type="submit" class="btn-primary" id="submitBookBtn">Add Book</button>
                                <button type="button" class="btn-secondary" id="cancelAddBookBtn">Cancel</button>
                            </div>
                        </form>
                    </div>

                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--spacing-md);">
                        <h3 style="margin: 0;">Your Books</h3>
                        <button id="toggleAddBookBtn" class="btn-primary">Add Book</button>
                    </div>

                    <div style="display: flex; gap: var(--spacing-xs); margin-bottom: var(--spacing-md);">
                        <button id="filterCurrentBtn" class="filter-btn active" data-filter="current">Current Books</button>
                        <button id="filterPreviousBtn" class="filter-btn" data-filter="previous">Previous Books</button>
                    </div>

                    <div id="myBooksGrid" class="books-grid">
                        <!-- User's books will be loaded here -->
                    </div>
                </div>

                <!-- Tab Content: Sent Offers -->
                <div id="tab-sent" class="tab-content">
                    <h3 style="margin-bottom: var(--spacing-md);">Trade Offers You've Sent</h3>
                    <div id="sentOffersGrid" class="books-grid">
                        <!-- Sent trade offers will be loaded here -->
                    </div>
                </div>

                <!-- Tab Content: Received Offers -->
                <div id="tab-received" class="tab-content">
                    <h3 style="margin-bottom: var(--spacing-md);">Trade Offers You've Received</h3>
                    <div id="receivedOffersGrid" class="books-grid">
                        <!-- Received trade offers will be loaded here -->
                    </div>
                </div>

                <!-- Tab Content: Accepted Trades -->
                <div id="tab-accepted" class="tab-content">
                    <h3 style="margin-bottom: var(--spacing-md);">Accepted Trades</h3>
                    <div id="acceptedTradesGrid" class="books-grid">
                        <!-- Accepted trades will be loaded here -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Shipping Address Modal -->
    <div id="shippingAddressModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Shipping Address</h2>
            <div id="shippingAddressContent"></div>
            <div style="display: flex; gap: 8px; margin-top: var(--spacing-md);">
                <button id="markAsMailedBtn" class="btn-primary">I've mailed my book!</button>
                <button id="closeShippingModalBtn" class="btn-secondary">OK</button>
            </div>
        </div>
    </div>

    <!-- Trade History Modal -->
    <div id="tradeHistoryModal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>Trade History</h2>
            <div id="tradeHistoryContent"></div>
            <div style="display: flex; gap: 8px; margin-top: var(--spacing-md);">
                <button id="closeTradeHistoryBtn" class="btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Edit Book Modal -->
    <div id="editBookModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>Edit Book</h2>
            <form id="editBookForm">
                <input type="hidden" id="editBookId">
                <input type="text" id="editBookTitle" placeholder="Book Title" required>
                <input type="text" id="editBookAuthor" placeholder="Author" required>
                <textarea id="editBookDescription" placeholder="Description (optional)"></textarea>
                <div class="condition-field">
                    <label for="editBookCondition">Condition</label>
                    <select id="editBookCondition" name="editBookCondition" required>
                        <option value="new">Great</option>
                        <option value="used">Fine</option>
                        <option value="bad intact">Bad but intact</option>
                        <option value="bad damaged">Bad and barely hanging on</option>
                    </select>
                </div>
                <label for="editBookImage">Cover Image (optional - leave empty to keep current)</label>
                <input type="file" id="editBookImage" accept="image/*">
                <div style="display: flex; gap: 8px; margin-top: 16px;">
                    <button type="submit" class="btn-primary">Save Changes</button>
                    <button type="button" class="btn-secondary" id="cancelEditBookBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <h2>User Settings</h2>
            <form id="settingsForm">
                <label for="settingsUsername">Username</label>
                <input type="text" id="settingsUsername" placeholder="Username" required>
                
                <label for="settingsStreet">Street Address</label>
                <input type="text" id="settingsStreet" placeholder="123 Main St">
                
                <label for="settingsCity">City</label>
                <input type="text" id="settingsCity" placeholder="City">
                
                <label for="settingsState">State</label>
                <select id="settingsState">
                    <option value="">Select State</option>
                    <option value="AL">Alabama</option>
                    <option value="AK">Alaska</option>
                    <option value="AZ">Arizona</option>
                    <option value="AR">Arkansas</option>
                    <option value="CA">California</option>
                    <option value="CO">Colorado</option>
                    <option value="CT">Connecticut</option>
                    <option value="DE">Delaware</option>
                    <option value="FL">Florida</option>
                    <option value="GA">Georgia</option>
                    <option value="HI">Hawaii</option>
                    <option value="ID">Idaho</option>
                    <option value="IL">Illinois</option>
                    <option value="IN">Indiana</option>
                    <option value="IA">Iowa</option>
                    <option value="KS">Kansas</option>
                    <option value="KY">Kentucky</option>
                    <option value="LA">Louisiana</option>
                    <option value="ME">Maine</option>
                    <option value="MD">Maryland</option>
                    <option value="MA">Massachusetts</option>
                    <option value="MI">Michigan</option>
                    <option value="MN">Minnesota</option>
                    <option value="MS">Mississippi</option>
                    <option value="MO">Missouri</option>
                    <option value="MT">Montana</option>
                    <option value="NE">Nebraska</option>
                    <option value="NV">Nevada</option>
                    <option value="NH">New Hampshire</option>
                    <option value="NJ">New Jersey</option>
                    <option value="NM">New Mexico</option>
                    <option value="NY">New York</option>
                    <option value="NC">North Carolina</option>
                    <option value="ND">North Dakota</option>
                    <option value="OH">Ohio</option>
                    <option value="OK">Oklahoma</option>
                    <option value="OR">Oregon</option>
                    <option value="PA">Pennsylvania</option>
                    <option value="RI">Rhode Island</option>
                    <option value="SC">South Carolina</option>
                    <option value="SD">South Dakota</option>
                    <option value="TN">Tennessee</option>
                    <option value="TX">Texas</option>
                    <option value="UT">Utah</option>
                    <option value="VT">Vermont</option>
                    <option value="VA">Virginia</option>
                    <option value="WA">Washington</option>
                    <option value="WV">West Virginia</option>
                    <option value="WI">Wisconsin</option>
                    <option value="WY">Wyoming</option>
                </select>
                
                <label for="settingsZip">ZIP Code</label>
                <input type="text" id="settingsZip" placeholder="12345" pattern="[0-9]{5}(-[0-9]{4})?" maxlength="10">
                
                <div style="display: flex; gap: 8px; margin-top: 16px;">
                    <button type="submit" class="btn-primary">Save Settings</button>
                    <button type="button" class="btn-secondary" id="cancelSettingsBtn">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="user.js"></script>
</body>
</html>

